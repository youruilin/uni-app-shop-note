import{_ as n,o as a,c as l,O as p}from"./chunks/framework.4e9a0020.js";const e="/uni-app-shop-note/assets/build_picture_2.6417e15f.png",u=JSON.parse('{"title":"小兔鲜儿 - 项目打包","description":"","frontmatter":{},"headers":[],"relativePath":"rabbit-shop/build.md","filePath":"rabbit-shop/build.md","lastUpdated":1693193296000}'),o={name:"rabbit-shop/build.md"};function t(r,s,c,i,D,y){return a(),l("div",null,[...s[0]||(s[0]=[p('<h1 id="小兔鲜儿-项目打包" tabindex="-1">小兔鲜儿 - 项目打包 <a class="header-anchor" href="#小兔鲜儿-项目打包" aria-label="Permalink to &quot;小兔鲜儿 - 项目打包&quot;">​</a></h1><h2 id="微信小程序端" tabindex="-1">微信小程序端 <a class="header-anchor" href="#微信小程序端" aria-label="Permalink to &quot;微信小程序端&quot;">​</a></h2><p>把当前 uni-app 项目打包成微信小程序端，并发布上线。</p><h3 id="核心步骤" tabindex="-1">核心步骤 <a class="header-anchor" href="#核心步骤" aria-label="Permalink to &quot;核心步骤&quot;">​</a></h3><ol><li>运行打包命令 <code>pnpm build:mp-weixin</code></li><li>预览和测试，微信开发者工具导入生成的 <code>/dist/build/mp-weixin</code> 目录</li><li>上传小程序代码</li><li>提交审核和发布</li></ol><h3 id="步骤图示" tabindex="-1">步骤图示 <a class="header-anchor" href="#步骤图示" aria-label="Permalink to &quot;步骤图示&quot;">​</a></h3><p>项目打包上线需要使用到多个工具，注意工具之间的职责。</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">VSCode</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">----</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">微信开发者工具</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">----</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">微信公众平台</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>了解：开发者也可独立使用 <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/ci.html" target="_blank" rel="noreferrer">miniprogram-ci</a> 进行小程序代码的上传等操作。</p><div class="tip custom-block"><p class="custom-block-title">举一反三</p><p>打包成其他小程序端的步骤类似，只是更换了 <strong>打包命令</strong> 和 <strong>开发者工具</strong> 。</p></div><h2 id="条件编译" tabindex="-1">条件编译 <a class="header-anchor" href="#条件编译" aria-label="Permalink to &quot;条件编译&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">常见问题</p><p>Q：按照 uni-app 规范开发可保证多平台兼容，但每个平台有自己的一些特性，该如何处理？</p><p>A：通过 <a href="https://uniapp.dcloud.net.cn/tutorial/platform.html#preprocessor" target="_blank" rel="noreferrer">条件编译</a>，让代码按条件编译到指定平台。</p></div><p><img src="'+e+`" alt="多端登录" data-fancybox="gallery"></p><p><strong>网页端不支持微信平台授权登录等功能</strong>，可通过 <a href="https://uniapp.dcloud.net.cn/tutorial/platform.html#preprocessor" target="_blank" rel="noreferrer">条件编译</a>，实现不同端渲染不同的登录界面。</p><h3 id="条件编译语法" tabindex="-1">条件编译语法 <a class="header-anchor" href="#条件编译语法" aria-label="Permalink to &quot;条件编译语法&quot;">​</a></h3><p>通过特殊注释，以 <strong><code>#ifdef</code></strong> 或 <strong><code>#ifndef</code></strong> 加 <strong>平台名称</strong> 开头，以 <strong><code>#endif</code></strong> 结尾。</p><p>多平台编译：<strong><code>#ifdef H5 || MP-WEIXIN</code></strong> 表示在 <strong>H5 端 或 微信小程序端</strong> 代码。</p><p>条件编译支持: 支持 .vue, .ts, .js, .scss, .css, pages.json 等文件。</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">setup</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">lang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 微信平台特有API，需要条件编译</span></span>
<span class="line highlighted"><span style="color:#676E95;font-style:italic;">// #ifdef MP-WEIXIN</span></span>
<span class="line"><span style="color:#BABED8;">wx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">login</span><span style="color:#BABED8;">()</span></span>
<span class="line"><span style="color:#BABED8;">wx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">requestPayment</span><span style="color:#BABED8;">()</span></span>
<span class="line highlighted"><span style="color:#676E95;font-style:italic;">// #endif</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">&lt;!-- 微信开发能力按钮，需要条件编译 --&gt;</span></span>
<span class="line highlighted"><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">&lt;!-- #ifdef MP-WEIXIN --&gt;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">open-type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">openSetting</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">授权管理</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">open-type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">feedback</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">问题反馈</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">open-type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">contact</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">联系我们</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line highlighted"><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">&lt;!-- #endif --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/* 如果出现样式兼容，也可添加条件编译 */</span></span>
<span class="line"><span style="color:#BABED8;">page </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">/* #ifdef H5 */</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#B2CCD6;">background-color</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> pink</span><span style="color:#89DDFF;">;</span></span>
<span class="line highlighted"><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">/* #endif */</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">开发技巧</p><p>可通过搜索 <code>wx.</code> 和 <code>open-type</code> 等平台关键词，快速查找需要<strong>小程序端</strong>需添加编译模式的代码。</p></div><h2 id="打包为-h5-端" tabindex="-1">打包为 H5 端 <a class="header-anchor" href="#打包为-h5-端" aria-label="Permalink to &quot;打包为 H5 端&quot;">​</a></h2><p>把当前 uni-app 项目打包成网页(H5)端，并配置路由基础路径。</p><h3 id="核心步骤-1" tabindex="-1">核心步骤 <a class="header-anchor" href="#核心步骤-1" aria-label="Permalink to &quot;核心步骤&quot;">​</a></h3><ol><li>运行打包命令 <code>pnpm build:h5</code></li><li>预览和测试，使用浏览器打开 <code>/dist/build/h5</code> 目录下的 <code>index.html</code> 文件</li><li>由运维部署到服务器</li></ol><h3 id="路由基础路径" tabindex="-1">路由基础路径 <a class="header-anchor" href="#路由基础路径" aria-label="Permalink to &quot;路由基础路径&quot;">​</a></h3><p>默认的路由基础路径为 <code>/</code> 根路径，部分网站并不是部署到根路径，需要按运维要求调整。</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// manifest.json</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">/* 网页端特有配置 */</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">h5</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">router</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#676E95;font-style:italic;">// 基础路径：./ 为相对路径</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">base</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">/* 小程序特有相关 */</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">mp-weixin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#676E95;font-style:italic;">// …省略</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">vueVersion</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="打包为-app-端" tabindex="-1">打包为 APP 端 <a class="header-anchor" href="#打包为-app-端" aria-label="Permalink to &quot;打包为 APP 端&quot;">​</a></h2><p><a href="https://uniapp.dcloud.net.cn/tutorial/run/run-app.html" target="_blank" rel="noreferrer">App 端</a> 的打包，预览、测试、发行，使用 <code>HBuilderX</code> 工具。</p>`,29)])])}const d=n(o,[["render",t]]);export{u as __pageData,d as default};
